import{I as G,D as H,r as i,e as T,a as Q,g as d,i as m,j as w,k as f,l as e,m as t,z as b,F as W,q as X,G as k,t as z,R as Y,A as Z,H as ee,n as te,P as C,Q as le,_ as oe}from"./index-BrkAYC-I.js";const ae={class:"pg-container"},ne={class:"content relative mx-auto text-center"},se={key:0},re={class:"flex flex-wrap gap-2"},ue={key:1},de={class:"text-left p2 wow animate__animated animate__fadeInUp"},pe={class:"flex items-center text-4 font-500 py-2 px-3 cursor-pointer"},ie=G({__name:"index",setup(me){const P=H(),V=i(!0),B=i(window.innerWidth<576),F={1:"审核中",2:"审核完成",3:"已通过",4:"未通过"},U=i(),a=T({company:"",address:"",business:"",contactName:"",contactPost:"",contactPhone:"",projectName:"",projectScene:"",projectStage:"",suggestProduct:"",projectNeedNum:"",needTotal:"",reportName:"",reportPhone:"",reportCompany:"",reportTime:"",remark:"",userId:""}),L=T({reportName:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:1,max:12,message:"请填写正确姓名后提交",trigger:"blur"}],reportCompany:[{required:!0,message:"请输入所在公司",trigger:"blur"},{min:1,max:11,message:"请填写正确所在公司后提交",trigger:"blur"}],reportPhone:[{required:!0,message:"请输入手机号",trigger:"blur"},{min:8,max:11,message:"请填写正确手机号后提交",trigger:"blur"}]}),_=i(""),c=i([]),v=i(!1),j=i(),h=i([]),x=i(),q=p=>{c.value.splice(c.value.indexOf(p),1)},O=()=>{v.value=!0,te(()=>{j.value.input.focus()})},$=()=>{x.value=JSON.parse(localStorage.getItem("userInfo"));const p={current:1,size:10,userId:x.value.userid};C.getReportList(p).subscribe(l=>{h.value=l.list})},I=()=>{_.value&&c.value.push(_.value),v.value=!1,_.value=""},A=async p=>{a.userId=x.value.userid,p&&await p.validate((l,S)=>{l&&c.value.forEach((y,n)=>{a.company=y,C.addReport(a).subscribe(()=>{P.push({path:"/"})}),c.value.length-1===n&&le({message:"报备信息已提交",center:!0,offset:80,type:"success"})})})},D=()=>{C.loginCheck().subscribe(p=>{p?(localStorage.setItem("userInfo",JSON.stringify(p)),$()):P.push("/")})};return Q(()=>{D()}),(p,l)=>{const S=d("el-badge"),y=d("el-tag"),n=d("el-input"),R=d("el-button"),r=d("el-form-item"),u=d("el-col"),g=d("el-row"),N=d("el-divider"),E=d("el-form"),J=d("ArrowLeftBold"),K=d("el-icon"),s=d("el-table-column"),M=d("el-table");return m(),w("div",ae,[f("div",ne,[V.value?(m(),w("section",se,[e(S,{class:"my-bb item cursor-pointer btn-black",value:h.value.length,color:"green",onClick:l[0]||(l[0]=o=>V.value=!1)},{default:t(()=>[b("我的报备 ")]),_:1},8,["value"]),e(E,{ref_key:"ruleFormRef",ref:U,"label-position":"right","label-width":"auto",model:a,rules:L,class:"mx-auto",style:{"max-width":"800px","text-align":"center"}},{default:t(()=>[e(g,null,{default:t(()=>[e(u,{span:32},{default:t(()=>[e(r,{label:"企业名称：","label-position":"top"},{default:t(()=>[f("div",null,[f("div",re,[(m(!0),w(W,null,X(c.value,o=>(m(),k(y,{key:o,closable:"",size:"large",effect:"light",type:"info",round:"",class:"btn-white","disable-transitions":!1,onClose:fe=>q(o)},{default:t(()=>[b(z(o),1)]),_:2},1032,["onClose"]))),128)),v.value?(m(),k(n,{key:0,ref_key:"InputRef",ref:j,modelValue:_.value,"onUpdate:modelValue":l[1]||(l[1]=o=>_.value=o),class:"w60",onKeyup:Y(I,["enter"]),onBlur:I},null,8,["modelValue"])):(m(),k(R,{key:1,class:"btn-black",round:"",onClick:O},{default:t(()=>[b("点击添加 + ")]),_:1}))])])]),_:1})]),_:1})]),_:1}),e(g,{gutter:20},{default:t(()=>[e(u,{span:"12"},{default:t(()=>[e(r,{label:"公司地址：","label-position":"top"},{default:t(()=>[e(n,{modelValue:a.address,"onUpdate:modelValue":l[2]||(l[2]=o=>a.address=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:"12"},{default:t(()=>[e(r,{label:"公司业务：","label-position":"top"},{default:t(()=>[e(n,{modelValue:a.business,"onUpdate:modelValue":l[3]||(l[3]=o=>a.business=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(N,{"content-position":"left"},{default:t(()=>[b("公司对接人信息")]),_:1}),e(g,{gutter:20},{default:t(()=>[e(u,{span:"12"},{default:t(()=>[e(r,{label:"姓名","label-position":"top"},{default:t(()=>[e(n,{modelValue:a.contactName,"onUpdate:modelValue":l[4]||(l[4]=o=>a.contactName=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:"12"},{default:t(()=>[e(r,{label:"职位","label-position":"top"},{default:t(()=>[e(n,{modelValue:a.contactPost,"onUpdate:modelValue":l[5]||(l[5]=o=>a.contactPost=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:"12"},{default:t(()=>[e(r,{label:"电话","label-position":"top"},{default:t(()=>[e(n,{modelValue:a.contactPhone,"onUpdate:modelValue":l[6]||(l[6]=o=>a.contactPhone=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(N,{"content-position":"left"},{default:t(()=>[b("报备项目具体信息")]),_:1}),e(g,{gutter:20},{default:t(()=>[e(u,{span:"12"},{default:t(()=>[e(r,{label:"项目名称","label-position":"top"},{default:t(()=>[e(n,{modelValue:a.projectName,"onUpdate:modelValue":l[7]||(l[7]=o=>a.projectName=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:"12"},{default:t(()=>[e(r,{label:"项目使用场景","label-position":"top"},{default:t(()=>[e(n,{modelValue:a.projectScene,"onUpdate:modelValue":l[8]||(l[8]=o=>a.projectScene=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:"12"},{default:t(()=>[e(r,{label:"项目阶段","label-position":"top"},{default:t(()=>[e(n,{modelValue:a.projectStage,"onUpdate:modelValue":l[9]||(l[9]=o=>a.projectStage=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:"12"},{default:t(()=>[e(r,{label:"推荐产品型号","label-position":"top"},{default:t(()=>[e(n,{modelValue:a.suggestProduct,"onUpdate:modelValue":l[10]||(l[10]=o=>a.suggestProduct=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:"12"},{default:t(()=>[e(r,{label:"项目需求数量","label-position":"top"},{default:t(()=>[e(n,{modelValue:a.projectNeedNum,"onUpdate:modelValue":l[11]||(l[11]=o=>a.projectNeedNum=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:"12"},{default:t(()=>[e(r,{label:"公司全年整体需求数量","label-position":"top"},{default:t(()=>[e(n,{modelValue:a.needTotal,"onUpdate:modelValue":l[12]||(l[12]=o=>a.needTotal=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(N,{"content-position":"left"}),e(g,{gutter:20},{default:t(()=>[e(u,{span:"12"},{default:t(()=>[e(r,{label:"报备人","label-position":"top",prop:"reportName"},{default:t(()=>[e(n,{modelValue:a.reportName,"onUpdate:modelValue":l[13]||(l[13]=o=>a.reportName=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:"12"},{default:t(()=>[e(r,{label:"报备人联系方式","label-position":"top",prop:"reportPhone"},{default:t(()=>[e(n,{modelValue:a.reportPhone,"onUpdate:modelValue":l[14]||(l[14]=o=>a.reportPhone=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:"12"},{default:t(()=>[e(r,{label:"所在公司","label-position":"top",prop:"reportCompany"},{default:t(()=>[e(n,{modelValue:a.reportCompany,"onUpdate:modelValue":l[15]||(l[15]=o=>a.reportCompany=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,{label:"备注","label-position":"top"},{default:t(()=>[e(n,{type:"textarea",style:{width:"760px"},autosize:{minRows:6,maxRows:6},maxlength:"150","show-word-limit":"",placeholder:"请输入不超过150个字",modelValue:a.remark,"onUpdate:modelValue":l[16]||(l[16]=o=>a.remark=o)},null,8,["modelValue"])]),_:1}),e(R,{class:"btn-black2",onClick:l[17]||(l[17]=o=>A(U.value))},{default:t(()=>[b("提交")]),_:1})]),_:1},8,["model","rules"])])):(m(),w("section",ue,[f("div",de,[f("li",pe,[e(K,null,{default:t(()=>[e(J)]),_:1}),f("span",{class:"px-3",onClick:l[18]||(l[18]=o=>V.value=!0)},"返回")])]),e(M,{data:h.value,style:ee(B.value?"width: 358px":"width: 100%"),height:"660",class:"shadow-xl min-w300 wow animate__animated animate__fadeInUp"},{default:t(()=>[e(s,{prop:"company",fixed:"left",label:"公司名称",width:"120","show-overflow-tooltip":!0}),e(s,{prop:"address",label:"地址",width:"160"}),e(s,{prop:"business",label:"主营业务",width:"160"}),e(s,{prop:"contactName",label:"客户对接人姓名",width:"160"}),e(s,{prop:"contactPost",label:"客户对接人职位",width:"160"}),e(s,{prop:"contactPhone",label:"客户对接人电话",width:"160"}),e(s,{prop:"projectName",label:"项目名称",width:"160"}),e(s,{prop:"projectScene",label:"使用场景",width:"160"}),e(s,{prop:"projectStage",label:"项目阶段",width:"160"}),e(s,{prop:"projectNeedNum",label:"项目需求量",width:"160"}),e(s,{prop:"suggestProduct",label:"推荐产品型号",width:"160"}),e(s,{prop:"needTotal",label:"全年整体需求数量",width:"170","show-overflow-tooltip":!0}),e(s,{prop:"createTime",sortable:"",label:"报备时间",width:"130","show-overflow-tooltip":!0}),e(s,{prop:"reportName",fixed:"right",label:"姓名",width:"120"}),e(s,{prop:"reportCompany",fixed:"right",label:"所在公司",width:"100","show-overflow-tooltip":!0}),e(s,{prop:"reportPhone",fixed:"right",label:"电话",width:"140","show-overflow-tooltip":!0}),e(s,{prop:"status",fixed:"right",label:"报备进度",width:"100"},{default:t(o=>[f("li",{class:Z(["status_"+o.row.status,"font-500"])},z(F[o.row.status]),3)]),_:1}),e(s,{prop:"remark",label:"备注",width:"140","show-overflow-tooltip":!0})]),_:1},8,["data","style"])]))])])}}}),be=oe(ie,[["__scopeId","data-v-6c7d12f4"]]);export{be as default};
